(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{379:function(e,t,a){"use strict";a.r(t);var v=a(6),_=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"_1-应用分层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-应用分层"}},[e._v("#")]),e._v(" (1)应用分层")]),e._v(" "),t("p",[e._v("1."),t("span",{staticStyle:{color:"orange"}},[t("strong",[e._v("【推荐】")])]),e._v("根据业务架构实践，结合业界分层规范与流行技术框架分析，推荐分层结构如图所示，默认上层依赖于下层，箭头关系表示可直接依赖，如：开放API层可以依赖于Web层（Controller层），也可以直接依赖于Service层，以此类推：")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://yz-typora-img.oss-cn-shanghai.aliyuncs.com/img/image-20220827145430029.png",alt:"image-20220827145430029"}})]),e._v(" "),t("ul",[t("li",[e._v("开放API层：可以直接封装Service接口暴露成RPC接口；通过Web封装成http接口；网关控制层等。")]),e._v(" "),t("li",[e._v("终端显示层：各个端的模块渲染并执行显示的层。当前主要是vlocity渲染，JS渲染，JSP渲染，移动端展示等。")]),e._v(" "),t("li",[e._v("Web层：主要是对访问控制进行转发，各类基本参数校验，或者不复用的业务简单处理等。")]),e._v(" "),t("li",[e._v("Service层：相对具体的业务逻辑服务层。")]),e._v(" "),t("li",[e._v("Manager层：通过业务处理层，它有如下特征：\n"),t("ol",[t("li",[e._v("对第三方平台封装的层，预处理返回结果及转化异常信息，适配上层接口。")]),e._v(" "),t("li",[e._v("对Service层通用能力的下沉，如缓存方案、中间件通用处理。")]),e._v(" "),t("li",[e._v("与DAO层交互，对多个DAO的组合复用。")])])]),e._v(" "),t("li",[e._v("Dao层：数据访问层，与低层MySQL、Oracle、Hbase、OceanBase等进行数据交互。")]),e._v(" "),t("li",[e._v("第三方服务：包括其它部门RPC服务接口，基础平台，其它公司的HTTP接口，如淘宝开放平台、支付宝付款服务、高德地图服务等。")]),e._v(" "),t("li",[e._v("外部数据接口：外部（应用）数据存储服务提供的接口，多见于数据迁移场景中。")])]),e._v(" "),t("p",[e._v("2."),t("span",{staticStyle:{color:"#3CB371"}},[t("strong",[e._v("【参考】")])]),e._v("（分层异常处理规约）在DAO层，产生的异常类型有很多，无法用细粒度的异常进行catch，使用catch(Exception e)方式，并 throw new DAOException(e)，不需要打印日志，因为日志在Manager或Service层一定需要捕获并打印到日志文件中去，如果同台服务器再打日志，浪费性能和存储。在Service层出现异常时，必须记录出错日志到磁盘，尽可能带上参数和上下文信息，相当于保护案发现场。Manager层与Service同机部署，日志方式与DAO层处理一直，如果是单独部署，则采用与Service一致的处理方式。Web层绝不应该继续往上抛异常，因为已经处于顶层，如果意识到这个异常将导致页面无法正常渲染，那么就应该直接跳转到友好错误页面，尽量加上友好的错误提示信息。开放接口层要将异常处理成错误码和错误信息方式返回。")]),e._v(" "),t("p",[e._v("3."),t("span",{staticStyle:{color:"#3CB371"}},[t("strong",[e._v("【参考】")])]),e._v("分层领域模型规约：")]),e._v(" "),t("ul",[t("li",[e._v("DO（Data Object）：此对象与数据库表接口一一对应，通过DAO层向上传输数据源对象。")]),e._v(" "),t("li",[e._v("DTO（Data Transfer Object）：数据传输对象，Service或Manager向外传输的对象。")]),e._v(" "),t("li",[e._v("BO（Business Object）：业务对象，可以由Service层输出的封装业务逻辑的对象。")]),e._v(" "),t("li",[e._v("Query：数据查询镀锡，各层接受上层的查询请求。注意超过2个参数据的查询封装，禁止使用Map类来传输。")]),e._v(" "),t("li",[e._v("VO（View Object）：显示层对象，通常是Web向模块渲染引擎层传输的对象。")])]),e._v(" "),t("h2",{attrs:{id:"_2-二方库依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-二方库依赖"}},[e._v("#")]),e._v(" (2)二方库依赖")]),e._v(" "),t("h2",{attrs:{id:"_3-服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-服务器"}},[e._v("#")]),e._v(" (3)服务器")])])}),[],!1,null,null,null);t.default=_.exports}}]);